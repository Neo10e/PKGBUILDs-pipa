# Maintainer: Jakko <jahau@rocketmail.com>

pkgname=swclock-offset
pkgver=0.3.0
pkgrel=1
pkgdesc="Keep system time at an offset to a non-writable RTC"
arch=('any')
url="https://gitlab.postmarketos.org/postmarketOS/swclock-offset"
license=('GPL-3.0-or-later')
source=("https://gitlab.postmarketos.org/postmarketOS/swclock-offset/-/archive/$pkgver/swclock-offset-$pkgver.tar.gz")
sha512sums=('7779deaf688dd25b9abe8161c8a0651d11b1a44785ff4495a1c4a8b9ba2108a9e73c47cbdb3f8669c4e2e85bea884145f66311c9ce674c1464538695a9852dc0')

package() {
	cd "$srcdir/$pkgname-$pkgver"
	
	sed -e 's+STORAGE_PATH+/var/cache+g' src/swclock-offset-boot.sh.in > src/swclock-offset-boot.sh
	sed -e 's+STORAGE_PATH+/var/cache+g' src/swclock-offset-shutdown.sh.in > src/swclock-offset-shutdown.sh

	# Install main binary
	install -Dm755 src/swclock-offset-boot.sh \
		"$pkgdir/usr/bin/swclock-offset-boot"

	install -Dm755 src/swclock-offset-shutdown.sh \
		"$pkgdir/usr/bin/swclock-offset-shutdown"
}
